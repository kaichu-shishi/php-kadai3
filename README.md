# 課題8　 -PHP3 ブックマークアプリ【更新・削除】-

## ①課題内容（どんな作品か）
- 課題7に引き続き、現実恋愛シミュレーションゲーム『ザ・ゲーム・ライオンキング』に、PHPとデータベースをつかって過去の言動を更新・削除する機能を追加実装した。
- ※注1：確認するときは「index.html」ではなく「page00.php」を開いてください。
- ※注2：ファイルの流れは以下の通りです。
  - （a）「page00.php」→言動入力画面→「page00_insert.php(Create)」
  - （b）「page00.php」→メニュー→過去の言動一覧→入力画面を再現する→「page00_detail.php(Read)」→修正ボタン→「page00_update.php(Update)」
  - （c）「page00.php」→メニュー→過去の言動一覧→記憶から抹消する→「page00_delete.php(Delete)」
- ※注3：sqlファイルは「kadai03」ではなく「kadai02」となっていますが、課題7(PHP2)の続きで使っている関係上名前がややこしくなっているだけなので、全く問題ありません。
  
## ②工夫した点・こだわった点
- フロント側（HTMLとJavaScript）で簡易的なバリデーション機能を実装した点。すなわち、言動のタイトル・カード選択・言動の内容、これらの三つが入力されていないとPHPに送信できないようなアーキテクチャにした。
- タイトルとテキストエリアについては、HTMLの要素に「required」をつけることで実装した。checkboxについてはこちらの記事をもとに実装した。→https://qiita.com/katao_eng/items/ffea1575afdc95646995
- 更新・削除のボタンを押したときは、JavaScriptのconfirmメッセージを表示し、キャンセルを押したら操作が取り消せるようにした。
- 「page00_detail.php」　の修正画面で、チェックボックスのデータを復元することにこだわった。phpのforeach構文と、三項演算子を使って実装することができた。

## ③難しかった点・次回トライしたいこと(又は機能)
- バリデーションの実装が最も難しかった。なかなか思い通りの実装にできず、今回は簡易的な実装（条件を満たしたときのみ確定ボタンと修正ボタンが有効になる、という実装）にとどまったのが悔しかった。本当は確定ボタンを押したとき、「本当にこれで確定しますか？ - OK or キャンセル」というような確認ダイアログボックスまで実装したかった。JavaScriptのconfirm();で試したのだが、キャンセルを押してもPHPに送信されてしまう問題が発生した。どんなに調べてもどうしても解消することができず、次回の課題としたい。

## ④質問・疑問・感想、シェアしたいこと等なんでも
- [質問]
- [疑問]チェックボックスのバリデーションをHTMLのonchangeで実装したが、修正画面で微妙に不具合が発生することとなった。より良いバリデーション設計とはどういうふうに作るのだろうか？
- [感想]機能を何個も付け加えていくと、コード量がどんどん増えていって頭の中がぐちゃぐちゃになっていくように感じた。
- [tips]
- [参考記事]
